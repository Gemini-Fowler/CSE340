<%- include('../partials/header') %>
<%- include('../partials/navigation') %>

<main>
  <h1>Update Account Information</h1>

  <% if (message) { %>
    <p class="flash-message"><%= message %></p>
  <% } %>

  <% if (errors && errors.length > 0) { %>
    <ul class="error-list">
      <% errors.forEach(error => { %>
        <li><%= error.msg %></li>
      <% }) %>
    </ul>
  <% } %>

  <!-- Account Update Form -->
  <section>
    <h2>Account Update</h2>
    <form action="/account/update" method="post">
      <label for="account_firstname">First Name:</label>
      <input type="text" id="account_firstname" name="account_firstname" required
        value="<%= accountData?.account_firstname || '' %>">

      <label for="account_lastname">Last Name:</label>
      <input type="text" id="account_lastname" name="account_lastname" required
        value="<%= accountData?.account_lastname || '' %>">

      <label for="account_email">Email:</label>
      <input type="email" id="account_email" name="account_email" required
        value="<%= accountData?.account_email || '' %>">

      <input type="hidden" name="account_id" value="<%= accountData?.account_id %>">

      <input type="submit" value="Update Account">
    </form>
  </section>

  <!-- Change Password Form -->
  <section>
    <h2>Change Password</h2>
    <p>Enter a new password to change your current one. Passwords must be at least 12 characters and contain at least one number, one capital letter, and one special character.</p>
    <form action="/account/update-password" method="post">
      <label for="account_password">New Password:</label>
      <input type="password" id="account_password" name="account_password" required
        pattern="(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*]).{12,}"
        title="Must be at least 12 characters and include a number, a capital letter, and a special character.">

      <input type="hidden" name="account_id" value="<%= accountData?.account_id %>">

      <input type="submit" value="Change Password">
    </form>
  </section>
</main>

<%- include('../partials/footer') %>
