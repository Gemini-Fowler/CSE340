<h1>
    <%= title %>
</h1>

<% if (typeof messages !=='undefined' && messages.notice) { %>
    <div class="alert alert-notice">
        <%= messages.notice %>
    </div>
    <% } %>

        <% if (typeof messages !=='undefined' && messages.error) { %>
            <div class="alert alert-danger">
                <%= messages.error %>
            </div>
            <% } %>

                <!-- Validation errors (express-validator) -->
                <% if (errors) { %>
                    <ul class="notice">
                        <% errors.array().forEach(error=> { %>
                            <li>
                                <%= error.msg %>
                            </li>
                            <% }) %>
                    </ul>
                    <% } %>

                        <div class="form-container">
                            <p class="form-instructions">
                                <strong>Note:</strong> Classification names cannot contain spaces or special characters.
                                Use only letters and numbers.
                            </p>

                            <form id="addClassificationForm" action="/inv/add-classification" method="post">
                                <div class="form-group">
                                    <label for="classification_name">Classification Name:</label>
                                    <input type="text" id="classification_name" name="classification_name" required
                                        pattern="^[a-zA-Z0-9]+$"
                                        title="Classification name must contain only letters and numbers, no spaces or special characters"
                                        value="<%= locals.classification_name || '' %>"
                                        placeholder="Enter classification name">
                                    <span class="form-hint">Only letters and numbers allowed</span>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">Add Classification</button>
                                </div>
                            </form>
                        </div>

                        <script>
                            // Client-side validation
                            document.getElementById('addClassificationForm').addEventListener('submit', function (e) {
                                const classificationName = document.getElementById('classification_name').value;
                                const pattern = /^[a-zA-Z0-9]+$/;

                                if (!pattern.test(classificationName)) {
                                    e.preventDefault();
                                    alert('Classification name must contain only letters and numbers. No spaces or special characters allowed.');
                                    return false;
                                }
                            });

                            // Real-time validation feedback
                            document.getElementById('classification_name').addEventListener('input', function (e) {
                                const value = e.target.value;
                                const pattern = /^[a-zA-Z0-9]+$/;

                                if (value && !pattern.test(value)) {
                                    e.target.setCustomValidity('Only letters and numbers allowed');
                                    e.target.style.borderColor = 'red';
                                } else {
                                    e.target.setCustomValidity('');
                                    e.target.style.borderColor = '';
                                }
                            });
                        </script>